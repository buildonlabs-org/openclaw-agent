OpenClaw Agent - Required Deployment Update
============================================

ACTION REQUIRED:
---------------
Redeploy the Railway service to apply authentication fix.


WHAT WAS FIXED:
--------------
‚úì Gateway now properly handles authentication (which IS required)
‚úì Auto-generates temporary token if none provided
‚úì Gateway starts successfully with authentication
‚úì **CRITICAL: Auto-configures to bypass device pairing**
‚úì Device management API for channel-specific pairing (Telegram/Discord)


KEY FIX - NO MORE "PAIRING REQUIRED" ERRORS:
--------------------------------------------
The container now automatically runs:
  openclaw config set gateway.controlUi.allowInsecureAuth true

This bypasses device pairing while maintaining token-based security.
Based on successful Railway template: github.com/arjunkomath/openclaw-railway-template


DEVICE PAIRING (For Channels Only):
-----------------------------------
Gateway connections work immediately without pairing.
Telegram/Discord bots may need channel-specific pairing:

When users see "pairing required" for Telegram/Discord:
1. Launcher shows "üîê Pair Device" button
2. User clicks to open device management modal
3. Pending devices are listed automatically
4. User clicks "Approve" next to pending device
5. Device approved instantly
6. User refreshes and connects successfully

API endpoints:
  GET  /api/devices          ‚Üí List all devices
  POST /api/devices/approve  ‚Üí Approve by requestId


AUTHENTICATION REQUIRED:
-----------------------
OpenClaw gateway REQUIRES authentication. Choose one:

  OPTION 1 - Set persistent token (RECOMMENDED):
  OPENCLAW_GATEWAY_TOKEN=your-secret-token
    ‚Üí Generate with: openssl rand -hex 32
    ‚Üí Token persists across restarts
    ‚Üí Best for production use

  OPTION 2 - Set password:
  OPENCLAW_PASSWORD=your-password
    ‚Üí Simple password authentication

  OPTION 3 - Use auto-generated token (DEFAULT):
    ‚Üí Don't set any auth variables
    ‚Üí Container generates temporary token on startup
    ‚Üí Token shown in Railway logs
    ‚Üí Changes on each restart


DEPLOYMENT STEPS:
-----------------

1. GO TO RAILWAY DASHBOARD
   ‚Üí Select your openclaw-agent deployment

2. SET ENVIRONMENT VARIABLES
   Required:
   ‚úì OPENAI_API_KEY=sk-...

   Recommended (for persistent access):
   ‚úì OPENCLAW_GATEWAY_TOKEN=<generated-token>

3. TRIGGER NEW DEPLOYMENT
   ‚Üí Push update to main branch (auto-deploys)
   OR
   ‚Üí Manually trigger redeploy

4. GET YOUR TOKEN
   ‚Üí Check Railway deployment logs
   ‚Üí Look for: "üîë Copy this token to connect to your gateway:"
   ‚Üí Copy the 64-character token from logs
   ‚Üí If using launcher: token shown in UI with copy button


EXPECTED RESULT:
----------------
‚úì Gateway starts with authentication enabled
‚úì Token printed clearly in startup logs
‚úì Secure: token NOT exposed via public endpoints
‚úì Clients can connect using the token from logs
‚úì No more "unauthorized" errors when using correct token

ENDPOINTS:
----------
  /health  ‚Üí Health check (no sensitive data)
